import{bU as V,bw as T,dr as y,d as h,k as S,ds as C,bT as m,bA as f,bS as I,dt as O,du as A,dv as F,dw as v,b7 as x,aj as l,dx as M,dy as N,dz as D,as as P,bI as k,a0 as b,bN as B,dA as $,dB as q}from"./index-CyMr76_m.js";import{PlacementOptions as E,TypeOptions as j}from"./3f72c732-CNfLx-Ml.js";import{TourPlacementTooltip as U,TourStepArrowTooltip as Y,TourStepMaskTooltip as z}from"./c8c952b7-BJsijtqc.js";var K=Object.defineProperty,L=(t,e,a)=>e in t?K(t,e,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[e]=a,W=(t,e,a)=>(L(t,e+"",a),a);function Z(t){return!!t.propertyView}function G(t){class e extends t{constructor(){super(...arguments),W(this,"dataIndex",q())}getDataIndex(){return this.dataIndex}}return e}function J(t,e){if(!t||t.length<=0)return t;const a=[];return t.reduce((p,o)=>{const s=o[e];return p.has(s)||a.push(o),p.add(s),p},new Set),a}function _(t,e){const a=A(G(t)),p=new V({manual:a},s=>{const n=s.manual.map(r=>r.getView());return e.uniqField?J(n,e.uniqField):n}).setPropertyViewFn(()=>{throw new Error("Method not implemented.")}).build();class o extends p{exposingNode(){return F(v(x.mapValues(this.children.manual.children,n=>v(x.mapValues(n.children,r=>r.exposingNode())))),n=>Object.values(n))}getNewId(){const{autoIncField:n}=e;if(!n)return 0;const r=this.children.manual.getView().map(i=>i.getView()),d=new Set(r.map(i=>i[n]));let u=0;for(;d.has(u);)++u;return u}propertyView(n){const r=this.children.manual,{autoIncField:d}=e,u=n.title??l("tour.section1Subtitle");return y({filterText:u},h(M,{itemTitle:i=>i.children.title.getView(),popoverTitle:()=>l("edit"),content:i=>Z(i)?i.propertyView({}):i.getPropertyView(),items:r.getView(),onAdd:()=>{const i=N(n.newOptionLabel||l("optionsControl.option")+" ",r.getView().map(w=>w.children.title.getView())),c=this.getNewId();r.dispatch(r.pushAction({label:i,...d?{[d]:c}:{}}))},onDel:i=>r.dispatch(r.deleteAction(i)),onCopy:i=>{const c=this.getNewId();r.dispatch(r.pushAction({...i.toJsonValue(),...d?{[d]:c}:{}}))},onMove:(i,c)=>{const w=r.arrayMoveAction(i,c);r.dispatch(w)},dataIndex:i=>i.getDataIndex(),uniqVal:e.uniqField&&(i=>i.children[e.uniqField].getView()),title:u}))}}return e.initOptions?T(o,{manual:e.initOptions}):o}function H(t,e){const a=new V({manual:_(t,{initOptions:e.initOptions})},p=>p.manual).setPropertyViewFn(()=>{throw new Error("Method not implemented.")}).build();return class extends a{exposingNode(){return this.children.manual.exposingNode()}propertyView(p){const o=this.children.manual.propertyView(p);return y({searchChild:!0},h(S,{children:o}))}}}function Q(t,e){return class extends X(t,e){getView(){return this.value}}}function R(t){const{options:e,onChange:a,value:p,...o}=t,[s,n]=b.useState(typeof e=="function"?[]:e),r=b.useContext(B);return b.useEffect(()=>{if(typeof e!="function"){n(e);return}s!=null&&s.length||n(e(r))},[s.length,e]),h($,{placement:o.placement,toolTip:o.tooltip,value:p,options:s,radioButton:o.radioButton,border:o.border,type:o.type,label:o.label,showSearch:!0,onChange:a,disabled:o.disabled,dropdownStyle:t.dropdownStyle,labelStyle:t.labelStyle})}function X(t,e){class a extends D{getDefaultValue(){return e}propertyView(o){return y({filterText:o.label},h(R,{...o,value:this.value,options:t,onChange:s=>{var n;o.disableDispatchValueChange||this.dispatchChangeValueAction(s),(n=o.onChange)==null||n.call(o,s)}}))}getPropertyView(){throw new Error("Method not implemented.")}}return a}let g=new V({target:Q(t=>Object.values(t.getAllUICompMap()).map(e=>({label:e.children.name.getView(),value:e.children.name.getView()})),""),arrow:C,title:m,description:m,placement:f(E,""),hidden:I,mask:O,cover:m,type:f(j,"")},t=>t).build();g=class extends g{propertyView(t){return P(S,{children:[this.children.title.propertyView({label:l("tour.options.title.label"),placeholder:l("tour.options.title.placeholder"),tooltip:l("tour.options.title.tooltip")}),this.children.description.propertyView({label:l("tour.options.description.label"),placeholder:l("tour.options.description.placeholder"),tooltip:l("tour.options.description.tooltip")}),this.children.target.propertyView({label:l("tour.options.target.label"),tooltip:l("tour.options.target.tooltip"),radioButton:!1}),this.children.placement.propertyView({label:l("tour.placement.label"),tooltip:U,radioButton:!1}),this.children.arrow.propertyView({label:l("tour.options.arrow.label"),tooltip:Y}),this.children.cover.propertyView({label:l("tour.options.coverImage.label"),tooltip:l("tour.options.coverImage.tooltip")}),this.children.mask.propertyView({label:l("tour.options.mask.label"),tooltip:z}),this.children.type.propertyView({label:l("tour.options.type.label"),tooltip:l("tour.options.type.tooltip")}),k(this.children)]})}};const ie=H(g,{initOptions:[{title:"Welcome",description:"Welcome to lowcoder"},{title:"Step 2",description:"This is a tutorial step"}]});export{ie as TourStepControl,X as editorStateDropdownAbstractControl,Q as editorStateDropdownControl,_ as manualTourStepsControl,H as tourStepsControl};
