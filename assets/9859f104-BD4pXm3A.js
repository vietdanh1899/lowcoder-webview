import{a4 as ee,kl as oe,a0 as c,bN as ie,gd as se,m3 as ce,m4 as de,kx as H,j_ as ue,d as n,eL as pe,hN as ge,aj as R,kn as he,F as G,as as f,k as me,cO as ye,kr as fe,ks as be,kt as ke,m5 as Ce,bQ as ve,cX as Q,d3 as xe,gX as Se,ca as Ne,m6 as Ee,m7 as Be,iE as U,m8 as Ie,m9 as Ve,ma as Ke,mb as Te,mc as $e,md as we,me as Ae,bO as Re,mf as q,mg as Z}from"./index-CyMr76_m.js";import{Q as Ue,O as De,U as ze}from"./4afbe9fa-8Ji5E0PC.js";import{B as Pe}from"./d10c8cde-CyCeNLXi.js";import{a as Fe}from"./f2467551-CJE-62bB.js";import"./18c4bdff-C7Ic10_K.js";import"./2f65199c-n-_s74j7.js";function _(L){const{colorKey:r,name:D,desc:z,color:v,radius:E,configChange:k,showVarName:$=!0,margin:x,padding:B,gridColumns:S}=L,j=G.debounce(k,0),[g,I]=c.useState(v),[W,w]=c.useState(E),[J,N]=c.useState(x),[M,A]=c.useState(B),[V,K]=c.useState(S),X=`(${r})`,P=()=>{!g||!CSS.supports("color",g)?I(v):(I(q(g)?Z(g):g),k({colorKey:r,color:q(g)?Z(g):g}))},F=e=>{let s="";!e||Number(e)===0?s="0":/^[0-9]+$/.test(e)?s=Number(e)+"px":/^[0-9]+(px|%)$/.test(e)?s=e:s="0",w(s),k({colorKey:r,radius:s})},O=e=>{let s="";!e||Number(e)===0?s="0":/^[0-9]+$/.test(e)?s=Number(e)+"px":/^[0-9]+(px|%)$/.test(e)?s=e:s="3px",N(s),k({colorKey:r,margin:s})},T=e=>{let s="";!e||Number(e)===0?s="0":/^[0-9]+$/.test(e)?s=Number(e)+"px":/^[0-9]+(px|%)$/.test(e)?s=e:s="3px",A(s),k({colorKey:r,padding:s})},Y=e=>{let s="";e?s=e:s="0",K(s),k({colorKey:r,gridColumns:s})};return c.useEffect(()=>{g&&CSS.supports("color",g)&&j({colorKey:r,color:g})},[g]),c.useEffect(()=>{I(v)},[v]),c.useEffect(()=>{w(E)},[E]),c.useEffect(()=>{N(x)},[x]),c.useEffect(()=>{A(B)},[B]),c.useEffect(()=>{K(S)},[S]),f(Ee,{className:L.className,children:[f("div",{className:"text-desc",children:[f("div",{className:"name",children:[D," ",$&&n("span",{children:X})]}),n("div",{className:"desc",children:z})]}),r!=="borderRadius"&&r!=="margin"&&r!=="padding"&&r!=="gridColumns"&&f("div",{className:"config-input",children:[n(Be,{changeColor:G.debounce(I,500,{leading:!0,trailing:!0}),color:g,trigger:"hover"}),n(U,{value:g,onChange:e=>I(e.target.value),onBlur:P,onKeyUp:e=>e.nativeEvent.key==="Enter"&&P()})]}),r==="borderRadius"&&f("div",{className:"config-input",children:[n(Ie,{$radius:E||"0",children:n("div",{children:n("div",{})})}),n(U,{value:W,onChange:e=>w(e.target.value),onBlur:e=>F(e.target.value),onKeyUp:e=>e.nativeEvent.key==="Enter"&&F(e.currentTarget.value)})]}),r==="margin"&&f("div",{className:"config-input",children:[n(Ve,{$margin:x||"4px",children:n("div",{children:n(Ke,{title:""})})}),n(U,{value:J,onChange:e=>N(e.target.value),onBlur:e=>O(e.target.value),onKeyUp:e=>e.nativeEvent.key==="Enter"&&O(e.currentTarget.value)})]}),r==="padding"&&f("div",{className:"config-input",children:[n(Te,{$padding:B||"4px",children:n("div",{children:n($e,{title:""})})}),n(U,{value:M,onChange:e=>A(e.target.value),onBlur:e=>T(e.target.value),onKeyUp:e=>e.nativeEvent.key==="Enter"&&T(e.currentTarget.value)})]}),r==="gridColumns"&&f("div",{className:"config-input",children:[n(we,{$gridColumns:S||"24",children:n("div",{children:n(Ae,{title:""})})}),n(U,{value:V,onChange:e=>K(e.target.value),onBlur:e=>Y(e.target.value),onKeyUp:e=>e.nativeEvent.key==="Enter"&&Y(e.currentTarget.value)})]})]})}const Oe=[{label:"Hide Component",key:"hidden"},{label:"Disable Component",key:"disable"},{label:"Margin",key:"style.margin"},{label:"Padding",key:"style.padding"},{label:"Font Size",key:"style.textSize"},{label:"Font Weight",key:"style.textWeight"},{label:"Font Family",key:"style.fontFamily"},{label:"Font Style",key:"style.fontStyle"},{label:"Text Transform",key:"style.textTransform"},{label:"Text Decoration",key:"style.textDecoration"},{label:"Border Radius",key:"style.borderRadius"},{label:"Border Width",key:"style.borderWidth"},{label:"Border Style",key:"style.borderStyle"},{label:"Background Image",key:"style.backgroundImage"},{label:"Background Image Repeat",key:"style.backgroundImageRepeat"},{label:"Background Image Size",key:"style.backgroundImageSize"},{label:"Background Image Position",key:"style.backgroundImagePosition"},{label:"Background Image Origin",key:"style.backgroundImageOrigin"}],Ye=ee.div`
  height: calc(100vh - ${oe});
`,Le=ee(Re)`
  .ant-dropdown-menu-item-icon {
    width: 14px !important;
    height: 14px !important; 
    max-width: 14px !important;
  }
`,_e=L=>{const r=c.useContext(ie),[D,z]=c.useState([]);se(),ce();const[v,E]=c.useState(r.getCollisionStatus()),[k,$]=c.useState([]),[x,B]=c.useState(""),[S,j]=c.useState(null),[g,I]=c.useState(""),W=c.useRef(null);c.useEffect(()=>{de(v)},[v]);const w=c.useCallback(l=>{j(l)},[]),J=l=>{r.rootComp.children.settings.children.disableCollision.dispatchChangeValueAction(l),E(l)},N=(l,o,t)=>{const{items:i,children:d}=l;if(Object.keys(i).length)for(const p in i){const h={title:i[p].children.name.getView(),type:i[p].children.compType.getView(),key:p,children:[]};if(t){const C=H(o,t);h.disabled=!0,C==null||C.children.push(h)}else o.push(h)}if(Object.keys(d).length)for(const p in d)N(d[p],o,p);return o},M=c.useCallback(l=>{r.setSelectedCompNames(new Set([l]),"leftPanel")},[r]),A=(l,o)=>(o.find(t=>t.name===l.title),n(ze,{children:n("span",{children:n("span",{children:l.title})})})),[V,K]=c.useState([]);c.useEffect(()=>{const l=X();K(l)},[r]);const X=()=>{const l=r.getUIComp().getTree(),o=N(l,[]),t=r.rootComp.toJsonValue();return t.ui.compType==="module"?o.forEach(i=>{i.pos=t.ui.comp.container.layout[i.key].pos}):o.forEach(i=>{i.pos=t.ui.layout[i.key].pos}),o.sort((i,d)=>{const p=(i==null?void 0:i.pos)||0,h=(d==null?void 0:d.pos)||0;return p<h?-1:p>h?1:0}),o},P=l=>{const{expandedKeys:o}=l;o.includes(l.node.key)||z(o)},F=l=>{const o=l.node.pos.split("-"),t=l.dragNode.pos.split("-");o.length===t.length&&K(i=>{let d=Pe(i);const p=Number(o[o.length-1]),h=Number(t[t.length-1]),C=o.slice(0,-1).join("-"),b=C==="0"?{children:d}:O(d,C);if(b&&b.children){const m=b.children.findIndex(a=>a.key===l.dragNode.key);if(m!==-1){const[a]=b.children.splice(m,1);b.children.splice(p>h?p-1:p,0,a)}}const y=r.rootComp.toJsonValue();let u={};if(y.ui.compType==="module"){b.children.forEach((a,re)=>{u[a.key]={...y.ui.comp.container.layout[a.key],pos:re}});const m=r.rootComp.children.ui.getModuleLayoutComp();m==null||m.children.container.dispatchChangeValueAction({...y.ui.comp.container,layout:u})}else b.children.forEach((m,a)=>{u[m.key]={...y.ui.layout[m.key],pos:a}}),r.rootComp.children.ui.dispatchChangeValueAction({...y.ui,layout:u});return d})},O=(l,o)=>{const t=o.split("-").map(d=>Number(d));let i={children:l};for(let d=0;d<t.length;d++)i=i.children[t[d]];return i};c.useCallback(l=>{switch(l){case"hidden":case"disable":return"true | false";case"style.border":return"e.g., #ffffff";case"style.borderRadius":case"style.radius":return"e.g., 4px";case"style.borderWidth":return"e.g., 2px";case"style.borderStyle":return"solid | dashed | dotted";case"style.backgroundImage":return"URL as string";case"style.backgroundImageRepeat":return"repeat | repeat-x | repeat-y | no-repeat";case"style.backgroundImageSize":return"cover | contain | % | px";case"style.backgroundImagePosition":return"top | bottom | center | % | px";case"style.backgroundImageOrigin":return"padding-box | border-box | content-box";case"style.margin":case"style.padding":return"e.g., 4px 8px 16px 32px";case"style.textSize":return"e.g., 16px";case"style.textWeight":return"bold | 900 | normal | 400";case"style.fontFamily":return"Arial, sans-serif";case"style.fontStyle":return"normal | italic | oblique";case"style.textTransform":return"none | capitalize | uppercase | lowercase";case"style.textDecoration":return"none | underline | overline | line-through";default:return"Action Value"}},[]);const T=(l,o)=>{var t,i,d,p,h;for(let C of e()){const b=H(V,C),y=r.getUICompByName(b.title);if(y){const{children:u}=y.children.comp,m=y.children.compType.getView(),a=o.split(".");a.length===1?(t=u[a[0]])==null||t.dispatchChangeValueAction(l):a.length===2&&(u[a[0]]?u[a[0]].children[a[1]]?(p=u[a[0]].children[a[1]])==null||p.dispatchChangeValueAction(l):(h=u[a[0]][a[1]])==null||h.dispatchChangeValueAction(l):(i=u[m].children[a[0]])!=null&&i.children[a[1]]&&((d=u[m].children[a[0]].children[a[1]])==null||d.dispatchChangeValueAction(l)))}}};c.useEffect(()=>{$([]);const l=[],o=r.getUIComp().getTree(),t=N(o,[]);for(let i of r.selectedCompNames)for(let d of t)d.title===i&&l.push(d.key);$(l)},[r]);const Y=(l,o)=>{$(l);const t=new Set;for(let i of o.checkedNodes)t.add(i.title);r.setSelectedCompNames(t,"leftPanel")},e=()=>k,s=()=>x,te=c.useCallback(l=>{var o,t,i,d,p;const h=s();for(let C of e()){const b=H(V,C),y=r.getUICompByName(b.title);if(y){const{children:u}=y.children.comp,m=y.children.compType.getView(),a=l.split(".");a.length===1?(o=u[a[0]])==null||o.dispatchChangeValueAction(h):a.length===2&&(u[a[0]]?u[a[0]].children[a[1]]?(d=u[a[0]].children[a[1]])==null||d.dispatchChangeValueAction(h):(p=u[a[0]][a[1]])==null||p.dispatchChangeValueAction(h):(t=u[m].children[a[0]])!=null&&t.children[a[1]]&&((i=u[m].children[a[0]].children[a[1]])==null||i.dispatchChangeValueAction(h)))}}},[s,e]),ne=()=>{const l=G.sortBy(r.uiCompInfoList(),[t=>t.name]),o=r.getCollisionStatus();return f(me,{children:[f("div",{style:{margin:"0px 16px"},children:[f("div",{style:{marginBottom:"10px"},children:[R("leftPanel.activatelayers"),n(ye,{style:{margin:"0px 10px"},size:"small",defaultChecked:v,disabled:!1,onChange:t=>{J(t)}})]}),n(Ue,{checkable:!0,onCheck:Y,selectable:!1,checkedKeys:k,draggable:o,onDragEnter:P,onDrop:t=>F(t),treeData:V,icon:t=>t.type&&n("div",{style:{margin:"3px 4px 0 -4px"},children:De[t.type]||n(fe,{})}),switcherIcon:t=>t.expanded?n(be,{}):n(ke,{}),expandedKeys:D,onExpand:t=>z(t),titleRender:t=>A(t,l)}),n("div",{style:{margin:"10px 0px"},children:f(Ce,{gap:"small",vertical:!0,children:[n(Le,{dropdownRender:()=>n(ve,{items:Oe,onClick:({key:t})=>{w(t)}}),children:n(Q,{size:"small",children:f(xe,{children:["Action ",n(Fe,{})]})})}),n(Se,{ref:W,value:x,onChange:t=>B(t.target.value),placeholder:g}),n(Q,{type:"primary",disabled:!S,onClick:()=>S&&te(S),children:"Apply Action"}),n("br",{}),n(_,{colorKey:"background",name:R("componentDoc.styleBackgroundColor"),color:"#ffffff",configChange:t=>T(t.color,"style.background")}),n(_,{colorKey:"border",name:R("componentDoc.styleBorderColor"),color:"#ffffff",configChange:t=>T(t.color,"style.border")}),n(_,{colorKey:"text",name:R("style.textColor"),color:"#ffffff",configChange:t=>T(t.color,"style.text")})]})})]}),n(Ne,{})]})},le=c.useMemo(()=>{if(!ue(r.getAppType()))return ne()},[r,M,D,V,x]),ae=n(pe,{children:n("div",{style:{paddingBottom:80},children:n(ge,{name:R("leftPanel.layers"),width:288,noMargin:!0,children:n("div",{className:he,children:le})})})});return n(Ye,{className:"cypress-left-content",children:ae})};export{_e as LeftLayersContent};
