import{a4 as w,et as x,c4 as S,bw as C,ct as P,bs as b,gI as E,c7 as N,bF as V,a0 as e,a7 as m,U as J,d as u,as as p,k as h,bG as c,bH as d,aj as g,bN as n,bI as F,bJ as M,bL as O,bK as k,cf as v}from"./index-CyMr76_m.js";import{defaultData as D}from"./0a417d48-BayM1EAS.js";import{formDataChildren as j,FormDataPropertyView as R}from"./2606e654-BU0arLul.js";import{u as H}from"./491f4ed4-Bqd4Kt62.js";import"./28655170-BWyz2Msd.js";const L=w.div`
  background-color: #fff;
  border: 1px solid #d7d9e0;
  border-radius: 4px;
  overflow: auto;
  height: 100%;
`;function $(t){return t&&!t.hasOwnProperty("label")?{...t,label:{text:""}}:t}function q(t){return t&&t.hasOwnProperty("default")?{...t,value:t.default}:t}const A={value:x("value",D),onEvent:S,label:C(P,{position:"column"}),style:b(E),animationStyle:b(N),...j};let r=function(){return new V(A,t=>{var f;const a=e.useRef(null),i=e.useRef(null),s=e.useRef(),{extensions:y}=H({codeType:"PureJSON",language:"json",showLineNum:!0,enableClickCompName:!1,onFocus:o=>{var l;o&&((l=a.current)==null||l.click())},onChange:o=>{s.current=o.doc.toString();try{const l=JSON.parse(o.doc.toString());t.value.onChange(l),t.onEvent("change")}catch{}}});if(e.useEffect(()=>{if(a.current&&!i.current){const o=m.create({doc:JSON.stringify(t.value.value,null,2),extensions:y});i.current=new J({state:o,parent:a.current})}},[a.current]),a.current&&i.current&&!s.current){const o=m.create({doc:JSON.stringify(t.value.value,null,2),extensions:y});(f=i.current)==null||f.setState(o)}return s.current&&(s.current=void 0),t.label({style:t.style,animationStyle:t.animationStyle,children:u(L,{ref:a,onFocus:()=>s.current="focus"})})}).setPropertyViewFn(t=>p(h,{children:[u(c,{name:d.basic,children:t.value.propertyView({label:g("export.jsonEditorDesc")})}),u(R,{...t}),(e.useContext(n).editorModeStatus==="logic"||e.useContext(n).editorModeStatus==="both")&&p(c,{name:d.interaction,children:[t.onEvent.getPropertyView(),F(t)]}),(e.useContext(n).editorModeStatus==="layout"||e.useContext(n).editorModeStatus==="both")&&t.label.getPropertyView(),(e.useContext(n).editorModeStatus==="layout"||e.useContext(n).editorModeStatus==="both")&&p(h,{children:[u(c,{name:d.style,children:t.style.getPropertyView()}),u(c,{name:d.animationStyle,hasTooltip:!0,children:t.animationStyle.getPropertyView()})]})]})).build()}();r=v(r,$);r=v(r,q);r=class extends r{autoHeight(){return!1}};const B=M(r,[new O("value",g("export.jsonEditorDesc")),k]);export{B as JsonEditorComp};
