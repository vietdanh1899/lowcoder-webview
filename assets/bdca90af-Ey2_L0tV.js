import{h0 as R,aj as e,iM as U,bU as _,iN as $,dr as x,bT as h,bw as l,bD as m,d7 as S,by as z,bA as v,iO as J,b_ as K,bV as d,h4 as u,a4 as s,iP as O,iQ as D,iR as H,iS as g,iT as B,iU as j,cJ as q,cK as T,d as r,k as y,gw as I,dv as G,F as k,dw as X,as as A,dA as Y,ca as W,gA as Q,gB as w,c2 as Z,dB as ee,bW as te,iL as ie,bY as re}from"./index-CyMr76_m.js";import{ColumnTypeCompMap as N,ColumnTypeComp as le}from"./119198d1-DOPTi23L.js";import{TextOverflowControl as oe}from"./ad1328d1-BWLAZt-j.js";import"./0a6b3cae-DX_83YlB.js";import"./aa7442af-9y-PcNP7.js";import"./7a2fe5b9-_-VMc9tG.js";import"./bbcd8d34-UQLMzqWl.js";import"./73e0b0c0-cg4qSQqq.js";import"./3edfe717-MHa75G-T.js";import"./58f3786f-CAidjqLe.js";import"./a0462e8b-DZIRdcE2.js";import"./3b4688fc-D_wIQU04.js";import"./779f3b7b-amEsk8BD.js";import"./6273459c-DX34gMfV.js";import"./b6a2fc32-DwuV3HZx.js";import"./1cf690a1-I_QK1KnU.js";import"./78fe38f6-CDiAuiLE.js";import"./019144c6-D7yg04yX.js";import"./4a5e4036-B1Vv5Fk3.js";import"./528263cd-C4IHPG-V.js";import"./c9e82af5-CWpE2eMW.js";import"./a88cf471-CYUSef1b.js";import"./09457722-DqGlVZ8K.js";import"./0939bf73-t5w-dpUI.js";import"./c5075bb1-DugznTE7.js";import"./a5d57101-D6143Rva.js";import"./874205af-IDtItRsf.js";import"./3b333d0b-CW89wYop.js";import"./3806f8cf-BO9BPaTR.js";import"./cb943b07-CQ1qmLm2.js";import"./0e89e2a5-BZIvfWTd.js";import"./2606e654-BU0arLul.js";const C=R(le),ae=[{label:e("table.auto"),value:"auto"},{label:e("table.fixed"),value:"fixed"}],ne=[{label:r(te,{}),value:"left"},{label:r(ie,{}),value:"close"},{label:r(re,{}),value:"right"}],E=e("table.cellColor"),pe=U(new _({color:$},a=>a.color).setPropertyViewFn(a=>a.color.propertyView({label:E,tooltip:e("table.cellColorDesc")})).build());class F extends pe{getPropertyView(){return x({filterText:E},super.getPropertyView())}}const de={title:h,showTitle:l(m,!0),isCustom:S(!1),dataIndex:S(""),hide:m,sortable:m,width:z,autoWidth:v(ae,"auto"),render:C,align:J,tempHide:K(!1),fixed:v(ne,"close"),editable:m,background:l(d,""),margin:l(u,""),text:l(d,""),border:l(d,""),borderWidth:l(u,""),radius:l(u,""),textSize:l(u,""),textWeight:l(h,"normal"),fontFamily:l(h,"sans-serif"),fontStyle:l(h,"normal"),cellColor:F,textOverflow:l(oe,"ellipsis"),linkColor:l(d,"#3377ff"),linkHoverColor:l(d,""),linkActiveColor:l(d,"")},se=s(O)` width: 24px; margin: 0 8px 0 -3px; padding: 3px;`,ce=s(D)` width: 24px; margin: 0 8px 0 -3px; padding: 3px;`,he=s(H)` width: 24px; margin: 0 8px 0 -3px; padding: 3px;`,P=s(g)` width: 24px; margin: 0 8px 0 -3px; padding: 3px;`,me=s(B)` width: 24px; margin: 0 8px 0 -3px; padding: 3px;`;s(j)` width: 24px; margin: 0 0px 0 -12px;`;const ue=new _(de,(a,i)=>({...a,onWidthResize:t=>{i(q({width:T(t,!0),autoWidth:T("fixed",!0)}))}})).setPropertyViewFn(()=>r(y,{})).build();class je extends ue{reduce(i){let t=super.reduce(i);if(i.type===I.UPDATE_NODES_V2&&(t=t.setChild("cellColor",t.children.cellColor.reduce(F.changeContextDataAction({currentCell:void 0})))),i.type===I.CHANGE_VALUE){const o=t.children.title.unevaledValue,n=t.children.dataIndex.getView();o||t.children.title.dispatchChangeValueAction(n)}return t}getView(){const i=super.getView(),t=this.children.render.getSelectedComp().getComp().children.compType.getView();return{...i,editable:N[t].canBeEditable()&&i.editable}}exposingNode(){const i=this.children.dataIndex.exposingNode(),t=G(this.children.render.node(),o=>({wrap:o.__comp__.wrap,map:k.mapValues(o.__map__,n=>n.comp)}));return X({dataIndex:i,render:t})}propertyView(i){var t,o,n;const p=this.children.render.getSelectedComp().getComp().children.compType.getView(),M=((t=this.children.render.getSelectedComp().getParams())==null?void 0:t.initialColumns)||[],c=this.children.render.getSelectedComp().getComp().toJsonValue();let b="{{currentCell}}";return(o=c.comp)!=null&&o.hasOwnProperty("src")?b=c.comp.src:(n=c.comp)!=null&&n.hasOwnProperty("text")&&(b=c.comp.text),A(y,{children:[this.children.title.propertyView({label:e("table.columnTitle"),placeholder:this.children.dataIndex.getView()}),r(Y,{showSearch:!0,defaultValue:b,options:M,label:e("table.dataMapping"),onChange:V=>{const L=p;let f={text:V};p==="image"&&(f={src:V}),this.children.render.dispatchChangeValueAction({compType:L,comp:f})}}),this.children.render.getPropertyView(),this.children.showTitle.propertyView({label:e("table.showTitle"),tooltip:e("table.showTitleTooltip")}),N[p].canBeEditable()&&this.children.editable.propertyView({label:e("table.editable")}),this.children.sortable.propertyView({label:e("table.sortable")}),this.children.hide.propertyView({label:e("prop.hide")}),this.children.align.propertyView({label:e("table.align"),radioButton:!0}),this.children.fixed.propertyView({label:e("table.fixedColumn"),radioButton:!0}),this.children.autoWidth.propertyView({label:e("table.autoWidth"),radioButton:!0}),this.children.autoWidth.getView()==="fixed"&&this.children.width.propertyView({label:e("prop.width")}),(p==="link"||p==="links")&&A(y,{children:[r(W,{style:{margin:"12px 0"}}),x({},r("div",{children:r("b",{children:"Link Style"})})),this.children.linkColor.propertyView({label:e("text")}),this.children.linkHoverColor.propertyView({label:"Hover text"}),this.children.linkActiveColor.propertyView({label:"Active text"})]}),r(W,{style:{margin:"12px 0"}}),x({},r("div",{children:r("b",{children:"Column Style"})})),this.children.background.propertyView({label:e("style.background")}),p!=="link"&&this.children.text.propertyView({label:e("text")}),this.children.border.propertyView({label:e("style.border")}),this.children.borderWidth.propertyView({label:e("style.borderWidth"),preInputNode:r(ce,{as:D,title:""}),placeholder:"1px"}),this.children.radius.propertyView({label:e("style.borderRadius"),preInputNode:r(se,{as:O,title:""}),placeholder:"3px"}),this.children.textSize.propertyView({label:e("style.textSize"),preInputNode:r(he,{as:H,title:""}),placeholder:"14px"}),this.children.textWeight.propertyView({label:e("style.textWeight"),preInputNode:r(me,{as:B,title:""}),placeholder:"normal"}),this.children.fontFamily.propertyView({label:e("style.fontFamily"),preInputNode:r(P,{as:g,title:""}),placeholder:"sans-serif"}),this.children.fontStyle.propertyView({label:e("style.fontStyle"),preInputNode:r(P,{as:g,title:""}),placeholder:"normal"}),this.children.textOverflow.getPropertyView(),this.children.cellColor.getPropertyView()]})}getChangeSet(){const i=this.children.dataIndex.getView(),t=k.mapValues(this.children.render.getMap(),o=>o.getComp().children.comp.children.changeValue.getView());return{[i]:t}}dispatchClearChangeSet(){this.children.render.dispatch(Q(C.forEachAction(w("comp",w("comp",Z("changeValue",null,!1))))))}static setSelectionAction(i){return w("render",C.setSelectionAction(i))}}function qe(){return{title:e("table.customColumn"),dataIndex:ee(),isCustom:!0}}function Ge(a,i,t,o){return{title:t??a,dataIndex:a,isCustom:!1,autoWidth:"fixed",width:i+"",render:{compType:o?"tag":"text",comp:{text:"{{currentCell}}"}}}}export{F as CellColorComp,je as ColumnComp,C as RenderComp,de as columnChildrenMap,qe as newCustomColumn,Ge as newPrimaryColumn};
