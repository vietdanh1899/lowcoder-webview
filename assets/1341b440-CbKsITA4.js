import{a4 as O,d as t,F as w,as as y,de as A,kg as Z,kh as I,M as _,ki as ee,kj as E,aj as x,kk as te,kl as F,a0 as u,bN as ne,j_ as D,km as ae,eL as Y,hN as j,kn as le,ko as q,k as H,kp as ie,kq as se,kr as oe,ks as re,kt as ce,ku as de,kv as pe,kw as he,kx as me}from"./index-CyMr76_m.js";import{Q as fe,O as ye,U as ge}from"./4afbe9fa-8Ji5E0PC.js";const ke=O.div`
  display: flex;
  width: fit-content;
  max-width: calc(100% - 8px);
`,ue=O.div`
  padding: 8px;
  display: flex;
  justify-content: space-between;
  align-items: center;

  &:hover .copy-icon {
    visibility: visible;
  }
`;O(I)`
  visibility: hidden;
  margin-left: 8px;
  color: #1890ff;
  cursor: pointer;
`;function N(e){return typeof e=="number"?(e+"").toString().length:typeof e=="string"||typeof e=="boolean"?e.toString().length:0}function U(e,r=2){const n=new Set;return JSON.stringify(e,(s,l)=>{if(typeof l=="object"&&l!==null){if(n.has(l))return"[Circular]";n.add(l)}return l},r)}function S(e,r,n,s){const l=typeof e=="function"?"Function":U(e),f={},v=s===!0?N(l)>42?l.slice(0,42)+"...":l:N(l)>20?l.slice(0,20)+"...":l;if(f[r]=n,Array.isArray(e)){const C={};return e.forEach((M,T)=>{C[T]=M}),t(B,{name:r,desc:f,data:C,isArray:!0,modal:s},r)}else return w.isPlainObject(e)?t(B,{name:r,desc:f,data:e,modal:s},r):y(ue,{style:{marginLeft:"20px",borderBottom:"1px solid #f0f0f0",height:"32px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[y(A,{title:n,placement:"right",children:[t(Z,{label:r})," â€‹"]}),y("div",{style:{display:"flex",wordBreak:"break-all",textAlign:"right"},children:[t("span",{style:{marginRight:"10px"},children:v}),N(l)>0&&t(I,{text:e,style:{color:"#ccc",marginRight:"0px",marginTop:"4px"}})]})]},r)}function xe(e){let r=[],n=[];return e.forEach((s,l)=>{l<15&&r.push(s),l>=e.length-5&&l<e.length&&n.push(s)}),{preArr:r,afterArr:n}}function ve(e){const r=Object.keys(e.data),n=xe;return t("div",{children:r.length<30?r.map(s=>{var l;return S(e.data[s],s,(l=e.desc)==null?void 0:l[s],e.modal)}):y(H,{children:[n(r).preArr.map(s=>{var l;return S(e.data[s],s,(l=e.desc)==null?void 0:l[s],e.modal)}),t(ie,{num:r.length-6}),n(r).afterArr.map(s=>{var l;return S(e.data[s],s,(l=e.desc)==null?void 0:l[s],e.modal)})]})})}const B=_.memo(e=>{var r;const{data:n={}}=e,s=Object.keys(n).length===1;return t(ee,{isSelected:e.isSelected,isOpen:e.isOpen,config:[{key:e.name,title:y("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[t(A,{title:(r=e.desc)==null?void 0:r[e.name],placement:"right",children:y(ke,{onClick:()=>e.onClick&&e.onClick(e.name),children:[t(E,{style:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},label:e.name,hasChild:Object.keys(n).length>0}),t(E,{style:{flexShrink:0},color:"#8B8FA3",label:`${e.isArray?"[]":"{}"} ${x(e.isArray?s?"leftPanel.propTipArr":"leftPanel.propTipsArr":s?"leftPanel.propTip":"leftPanel.propTips",{num:Object.keys(n).length})}`})]})}),Object.keys(n).length>0&&t(I,{text:U(n),style:{color:"#aaa",marginRight:"8px"}})]}),data:ve({data:n,desc:e.desc,modal:e.modal})}]})}),be=O(de)`
  .ant-tabs-nav {
    background-color: ${te};
    height: 40px;
    padding: 0 16px;
    margin: 0;

    .ant-tabs-tab {
      padding: 0;
      font-weight: 500;
    }
  }

  .ant-tabs-tabpane {
    height: calc(100vh - ${F} - 40px);
  }
`,z=O.div`
  height: calc(100vh - ${F});
`,Te=e=>{const{uiComp:r}=e,n=u.useContext(ne),[s,l]=u.useState([]),[f,v]=u.useState([]),C=(a,c,g)=>{const{items:p,children:h}=a;if(Object.keys(p).length){for(const i in p){const o={title:p[i].children.name.getView(),type:p[i].children.compType.getView(),key:i,children:[]};if(g){const d=me(c,g);d==null||d.children.push(o)}else c.push(o)}c=w.sortBy(c,[i=>i.title])}if(Object.keys(h).length)for(const i in h)C(h[i],c,i);return c},M=(a,c,g)=>{var p,h,i;T(c.title+"");const o=g.find(d=>d.name===c.title);if(!((p=c.children)!=null&&p.length)&&o&&(h=Object.keys(o.data))!=null&&h.length&&c.selected){const d=f.findIndex(k=>k.key===c.key);let m=[],b=((i=a.currentTarget)==null?void 0:i.offsetLeft)+20;d>-1?m=f.map(k=>k.key===c.key?{key:k.key,show:!k.show,clientX:b}:k):m=[...f,{key:c.key+"",show:!0,clientX:b}],v(m)}},T=u.useCallback(a=>{n.setSelectedCompNames(new Set([a]),"leftPanel")},[n]),L=u.useCallback((a,c)=>{n.setSelectedBottomRes(c,a)},[n]),V=(a,c)=>{var g;const p=f.find(o=>o.key===a.key),h=c.find(o=>o.name===a.title),i=(o,d)=>t("div",{children:Object.keys(o).map(m=>S(o[m],m,d==null?void 0:d[m],!0))});return y(ge,{children:[y("span",{children:[y("span",{children:[a.title," "]}),h&&!!((g=Object.keys(h.data))!=null&&g.length)&&(p!=null&&p.show?t(A,{placement:"right",title:x("leftPanel.collapseTip",{component:a.title}),children:t("div",{title:"",className:"show-data",onClick:o=>{o.stopPropagation();const d=f.map(m=>m.key===a.key?{key:m.key,show:!1,clientX:void 0}:m);v(d)}})}):t(A,{placement:"right",title:x("leftPanel.expandTip",{component:a.title}),children:t("div",{title:"",className:"no-data",onClick:o=>{var d;o.stopPropagation();const m=f.findIndex(P=>P.key===a.key);let b=[];const k={key:a.key,show:!0,clientX:(d=o.currentTarget.parentElement)==null?void 0:d.offsetLeft};m>-1?b=f.map(P=>P.key===a.key?k:P):b=[...f,k],v(b)},children:t(pe,{})})}))]}),(p==null?void 0:p.show)&&h&&t(he,{title:h.name,open:p.show,onOk:()=>v([]),cancelButtonProps:{style:{display:"none"}},maskClosable:!0,children:t("div",{style:{whiteSpace:"nowrap",wordWrap:"normal",maxHeight:"calc(100vh - 400px)",overflow:"scroll"},onClick:o=>o.stopPropagation(),children:i(h.data,h.dataDesc)})})]},a.key)},$=a=>{const c=w.sortBy(n.uiCompInfoList(),[i=>i.name]),g=a==="components"?n.getUIComp().getTree():n.getHooksComp().getUITree(),p=C(g,[]);let h=[];if(n.selectedCompNames.size===1){const i=Object.keys(n.selectedComps())[0],o=se(p,i);if(o&&o.length){let d=!1;o.forEach(m=>{s.includes(m)||(d=!0)}),d&&l(w.union(s,o))}h.push(i)}return t(fe,{treeData:p,icon:i=>i.type&&t("div",{style:{margin:"16px 4px 0 -4px"},children:ye[i.type]||t(oe,{})}),switcherIcon:i=>i.expanded?t(re,{}):t(ce,{}),expandedKeys:s,onExpand:i=>l(i),onClick:(i,o)=>M(i,o,c),selectedKeys:h,titleRender:i=>V(i,c)})},J=u.useMemo(()=>{if(!D(n.getAppType()))return $("components")},[n,T,s,f]),K=u.useMemo(()=>{if(!D(n.getAppType()))return $("modals")},[n,T,s,f]),Q=u.useMemo(()=>n.bottomResComInfoList().map(a=>t(B,{name:a.name,desc:a.dataDesc,data:a.data,isSelected:n.selectedBottomResName===a.name,onClick:()=>L(a.type,a.name)},a.name)),[n,L]),G=u.useMemo(()=>w.sortBy(n.hooksCompInfoList().filter(a=>ae(a.type)==="hook"),[a=>a.name]).map(a=>t(B,{name:a.name,desc:a.dataDesc,data:a.data,isSelected:!1,onClick:w.noop},a.name)),[n]),R=r.getModuleLayoutComp(),X=t(Y,{children:y("div",{style:{paddingBottom:80},children:[t(j,{name:x("leftPanel.components"),width:288,noMargin:!0,children:t("span",{className:le,children:J})}),t(j,{name:x("leftPanel.modals"),width:288,noMargin:!0,children:t("span",{children:K})}),t(j,{name:x("leftPanel.queries"),width:288,noMargin:!0,children:t("span",{children:Q})}),t(j,{name:x("leftPanel.globals"),width:288,noMargin:!0,children:t("span",{children:G})})]})});if(!R)return t(z,{className:"cypress-left-content",children:X});const W=[{key:"state",label:t(q,{text:x("leftPanel.stateTab")}),children:t(H,{children:X})},{key:"module-setting",label:t(q,{text:x("leftPanel.settingsTab")}),children:t(Y,{children:t("div",{style:{paddingBottom:80,paddingTop:16},children:t(j,{width:288,noMargin:!0,children:t("span",{children:R.getConfigView()})})})})}];return t(z,{className:"cypress-left-content",children:t(be,{defaultActiveKey:"module-setting",items:W})})};export{Te as LeftContent,S as default};
