import{h1 as L,h2 as v,bw as o,by as V,bT as N,ci as x,bD as p,bs as y,h3 as F,c7 as U,h4 as Y,bF as z,d as g,k as f,h5 as P,gw as A,h6 as d,F as h,h7 as H,dL as E,dv as M,h8 as X,dw as T,eU as O,h9 as Z,ha as B,bJ as G,f0 as b,aj as _,dZ as j,bK as K,f1 as W,eV as q,hb as J,hc as Q}from"./index-CyMr76_m.js";import{PaginationControl as $}from"./890d69bf-DGU2Stkr.js";import{ContextContainerComp as k}from"./4109a019-urJExrvy.js";import{ListView as ee}from"./6bf3f6e6-rM4vV2jt.js";import{listPropertyView as te}from"./e245553d-BTdk77so.js";const ie={noOfRows:L(v),noOfColumns:o(V,1),itemIndexName:o(N,"i"),itemDataName:o(N,"currentItem"),dynamicHeight:x,heightUnitOfRow:o(V,1),container:k,autoHeight:x,scrollbars:o(p,!1),showBorder:p,pagination:o($,{pageSize:"6"}),style:y(F),animationStyle:y(U),horizontal:o(p,!1),minHorizontalWidth:o(Y,"100px")},ae=new z(ie,()=>g(f,{})).setPropertyViewFn(()=>g(f,{})).build();class ne extends ae{getOriginalContainer(){return this.children.container.getSelectedComp().getComp()}realSimpleContainer(e){return this.getOriginalContainer().realSimpleContainer(e)}getCompTree(){return this.getOriginalContainer().getCompTree()}findContainer(e){return this.getOriginalContainer().findContainer(e)}getPasteValue(e){return{...this.toJsonValue(),container:this.getOriginalContainer().getPasteValue(e)}}autoHeight(){return this.children.autoHeight.getView()}reduce(e){let i=P({inEventContext:!0},()=>super.reduce(e));if(e.type===A.UPDATE_NODES_V2){const{itemCount:c}=d(i.children.noOfRows.getView()),r=i.children.pagination.getView(),l=r.total||c,s=(r.current-1)*r.pageSize;s>=l&&r.current>1?setTimeout(()=>i.children.pagination.children.pageNo.dispatchChangeValueAction(1)):String(s)!==this.children.container.getSelection()&&setTimeout(()=>i.children.container.dispatch(k.setSelectionAction(String(s))))}return i}itemsNode(){const{itemCount:e}=d(this.children.noOfRows.getView()),i=this.children.itemIndexName.getView(),c=this.children.itemDataName.getView(),r=this.children.noOfRows.exposingNode(),l=this.children.container,s=h(h.range(0,e)).toPairs().fromPairs().mapValues(n=>{let m=l.getCachedComp(String(n))??l.getOriginalComp();const I=H(m.getComp().getCompTree()),u=h(I).mapKeys(a=>a.children.name.getView()).mapValues(a=>a.children.comp.exposingNode()).value(),S={[i]:E(n),[c]:M(r,a=>typeof a=="number"?{}:a[n])},R=new X(T(u),S);return O(this,"exposing_row_"+n,[R,r,u,i,c],(a,C)=>a[1]===C[1]&&Z(a.slice(2),C.slice(2),3))[0]}).value(),D=M(T(s),n=>h.range(0,e).map(m=>n[m]));return O(this,"exposing_data",[D,s],(n,m)=>B(n[1],m[1]))[0]}}const oe=Q(ne,t=>g(ee,{comp:t})),re=te("listView");let w=J(oe,t=>g(re,{comp:t}));w=G(w,[new b("items",t=>({data:t.itemsNode()}),t=>t.data,_("listView.itemsDesc")),j({name:"data",desc:_("listView.dataDesc"),depKeys:["noOfRows"],func:t=>{const{data:e}=d(t.noOfRows);return e}}),new b("pageNo",t=>({index:t.children.pagination.children.pageNo.exposingNode()}),t=>t.index,"Page Number"),K]);const ge=W(w,[{method:{name:"setPage",description:"",params:[{name:"page",type:"number"}]},execute:(t,e)=>{const i=e[0];i&&i>0&&t.children.pagination.children.pageNo.dispatchChangeValueAction(i)}}]);function pe(t,e){return{noOfRows:`[
  {
    "rate": "9.2",
    "title": "The Shawshank Redemption",
    "url": "https://www.imdb.com/title/tt0111161/",
    "cover": "https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_UY67_CR0,0,45,67_AL_.jpg"
  },
  {
    "rate": "9.2",
    "title": "The Godfather",
    "url": "https://www.imdb.com/title/tt0068646/",
    "cover": "https://m.media-amazon.com/images/M/MV5BM2MyNjYxNmUtYTAwNi00MTYxLWJmNWYtYzZlODY3ZTk3OTFlXkEyXkFqcGdeQXVyNzkwMjQ5NzM@._V1_UY67_CR1,0,45,67_AL_.jpg"
  },
  {
    "rate": "9.0",
    "title": "The Dark Knight",
    "url": "https://www.imdb.com/title/tt0468569/",
    "cover": "https://m.media-amazon.com/images/M/MV5BMTMxNTMwODM0NF5BMl5BanBnXkFtZTcwODAyMTk2Mw@@._V1_UY67_CR0,0,45,67_AL_.jpg"
  }
]`,container:q([{item:{compType:"image",name:e.genItemName("image"),comp:{src:"{{currentItem.cover}}",autoHeight:"fixed"}},layoutItem:{i:"",w:6,h:14,x:0,y:0}},{item:{compType:"link",name:e.genItemName("link"),comp:{text:"{{i+1}}. {{currentItem.title}}",onEvent:[{name:"click",handler:{compType:"goToURL",comp:{url:"{{currentItem.url}}",inNewTab:!0},condition:"",slowdown:"debounce",delay:""}}]}},layoutItem:{i:"",h:5,w:17,x:7,y:0}},{item:{compType:"rating",name:e.genItemName("rating"),comp:{defaultValue:"{{currentItem.rate / 2}}",max:"5",label:{text:"",width:"33",widthUnit:"%",position:"row",align:"right"},allowHalf:!0,disabled:!0}},layoutItem:{i:"",h:5,w:17,x:7,y:9}}])}}export{ge as ListViewComp,ne as ListViewImplComp,pe as defaultListViewData};
