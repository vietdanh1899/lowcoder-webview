import{k6 as k,a0 as o,k7 as v,gw as E,k8 as V,gA as y,as as C,k9 as I,d as r,ka as T,kb as w,kc as L,jM as M,kd as R,ke as x,kf as A}from"./index-CyMr76_m.js";const D=k(),P=()=>{var t;return(t=document.querySelector(".skeleton-container"))==null?void 0:t.classList.add("loader-hide")};function N(t){const{dsl:p,moduleDsl:h,appId:i,moduleInputs:l,onCompChange:c,onModuleEventTriggered:s}=t,d=o.useRef(s);d.current=s;const m=o.useMemo(()=>({Comp:v,initialValue:p,reduceContext:{readOnly:!0,applicationId:i,parentApplicationPath:[],moduleDSL:h||{}},initHandler:e=>e.preload(`app-${i}`),actionPreInterceptor:e=>{var n;return e.type===E.TRIGGER_MODULE_EVENT?((n=d.current)==null||n.call(d,e.name),!1):!0}}),[i]),[a,G,f]=V(m);return o.useEffect(()=>{c==null||c(a)},[a]),o.useEffect(()=>{const e=a==null?void 0:a.children.ui.getModuleLayoutComp();!e||!l||e.children.io.children.inputs.getView().forEach(n=>{const{name:g}=n.getView(),u=l[g];u!==void 0&&n.children.defaultValue.children.comp.dispatch(y(n.children.defaultValue.children.comp.changeValueAction(u)))})},[l,f]),o.useEffect(()=>{P()},[]),C(I,{children:[r(T,{}),r(w,{store:L,children:r(M.Provider,{value:{applicationId:i,appType:1,readOnly:!0,hideHeader:!0},children:r(R.Provider,{value:t.orgCommonSettings,children:r(x,{history:D,children:r(A,{path:"/",render:()=>a==null?void 0:a.getView()})})})})})]})}export{N as AppView};
