import{a4 as T,jI as p,aj as t,bA as V,ct as k,bw as m,bT as F,i5 as P,bD as f,b_ as A,bs as y,cu as M,cv as I,jJ as $,cM as D,bF as H,d as s,as as a,k as b,bG as r,bH as o,cC as N,a0 as n,bN as d,dU as W,i9 as R,bJ as _,bL as j,c2 as B}from"./index-CyMr76_m.js";import{treeCommonChildren as K,treeDataPropertyView as U,formSection as q,valuePropertyView as O,TreeNameConfigs as G,useTree as J}from"./1db48ff0-MhWGuqUi.js";import{getStyle as Y,baseSelectRefMethods as z}from"./a5d57101-D6143Rva.js";import{SelectInputValidationSection as Z,useSelectInputValidate as Q}from"./3b4688fc-D_wIQU04.js";import"./a709ec52-D-ibbKJj.js";import"./874205af-IDtItRsf.js";import"./3b333d0b-CW89wYop.js";import"./2606e654-BU0arLul.js";const X=T(p)`
  width: 100%;
  ${e=>e.$style&&Y(e.$style)}
`,ee=[{label:t("tree.singleSelect"),value:"single"},{label:t("tree.multiSelect"),value:"multi"},{label:t("tree.checkbox"),value:"check"}],te=[{label:t("tree.showAll"),value:"all"},{label:t("tree.showParent"),value:"parent"},{label:t("tree.showChild"),value:"child"}],le={...K,selectType:V(ee,"single"),checkedStrategy:V(te,"parent"),label:k,placeholder:m(F,t("tree.placeholder")),onEvent:P,allowClear:f,showSearch:f.DEFAULT_TRUE,inputValue:A(""),style:y(M),labelStyle:y(I),inputFieldStyle:m(y($),{borderWidth:"1px"}),viewRef:D};function ae(e){switch(e){case"all":return p.SHOW_ALL;case"parent":return p.SHOW_PARENT;case"child":return p.SHOW_CHILD}}const re=e=>{const{treeData:u,selectType:c,value:i,expanded:S,style:v,labelStyle:g,inputValue:C}=e,h=c==="single",[x,L]=Q(e);return n.useEffect(()=>{h&&i.value.length>1&&i.onChange(i.value.slice(0,1))},[c]),J(e),e.label({required:e.required,...x,style:v,labelStyle:g,inputFieldStyle:e.inputFieldStyle,children:s(X,{ref:e.viewRef,$style:e.inputFieldStyle,popupMatchSelectWidth:!1,disabled:e.disabled,placeholder:e.placeholder,allowClear:e.allowClear,fieldNames:{label:"label",value:"value"},treeData:u,multiple:!h,value:h?i.value[0]:i.value,treeCheckable:c==="check",showCheckedStrategy:ae(e.checkedStrategy),treeLine:e.showLine?{showLeafIcon:e.showLeafIcon}:!1,treeExpandedKeys:C?void 0:S.value,onTreeExpand:l=>{S.onChange(l)},onChange:l=>{const E=Array.isArray(l)?l:l!==void 0?[l]:[];L(E)},showSearch:e.showSearch,treeNodeFilterProp:"label",autoClearSearchValue:!1,onSearch:l=>{e.dispatch(B("inputValue",l,!1))},onFocus:()=>e.onEvent("focus"),onBlur:()=>e.onEvent("blur")},c)})};let w=function(){return new H(le,(e,u)=>s(re,{...e,dispatch:u})).setPropertyViewFn(e=>a(b,{children:[a(r,{name:o.basic,children:[U(e),N(e)]}),["logic","both"].includes(n.useContext(d).editorModeStatus)&&a(b,{children:[s(Z,{...e}),q(e),a(r,{name:o.interaction,children:[e.onEvent.getPropertyView(),e.hidden.propertyView({label:t("prop.hide")}),e.disabled.propertyView({label:t("prop.disabled")}),e.selectType.propertyView({label:t("tree.selectType")}),O(e),e.selectType.getView()==="check"&&e.checkedStrategy.propertyView({label:t("tree.checkedStrategy")}),W(e),R(e)]})]}),["layout","both"].includes(n.useContext(d).editorModeStatus)&&a(r,{name:o.layout,children:[e.expanded.propertyView({label:t("tree.expanded")}),e.defaultExpandAll.propertyView({label:t("tree.defaultExpandAll")}),e.showLine.propertyView({label:t("tree.showLine")}),e.showLine.getView()&&e.showLeafIcon.propertyView({label:t("tree.showLeafIcon")})]}),["layout","both"].includes(n.useContext(d).editorModeStatus)&&e.label.getPropertyView(),["layout","both"].includes(n.useContext(d).editorModeStatus)&&a(b,{children:[s(r,{name:o.style,children:e.style.getPropertyView()}),s(r,{name:o.labelStyle,children:e.labelStyle.getPropertyView()}),s(r,{name:o.inputFieldStyle,children:e.inputFieldStyle.getPropertyView()})]})]})).setExposeMethodConfigs(z).build()}();w=class extends w{autoHeight(){return!0}};const he=_(w,[...G,new j("inputValue",t("select.inputValueDesc"))]);export{he as TreeSelectComp};
